<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>US Lifestyle Clubs Map</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #map { width: 100%; height: 100%; }

    .state-label {
      font-weight: bold;
      font-size: 14px;
      color: #333;
      background: transparent; /* removed white box */
      padding: 0;
      text-align: center;
      box-shadow: none;
    }

    .club-label {
      font-weight: bold;
      font-size: 13px;
      color: #1abc9c; /* teal, adjust palette as needed */
      background: transparent;
      padding: 0;
      text-align: center;
      text-shadow: 0 0 2px #fff; /* subtle outline for readability */
    }

    .leaflet-control-layers { font-size: 14px; }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Your GeoJSON file should be linked or included -->
  <script src="us-states.js"></script> <!-- replace with your GeoJSON path -->

  <script>
    // Initialize map
    const map = L.map('map').setView([39.8283, -98.5795], 4); // center of US

    // Voyager No Labels Base Map
    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
      subdomains: 'abcd',
      maxZoom: 19
    }).addTo(map);

    // Load US states GeoJSON
    const geojsonLayer = L.geoJSON(usStatesGeoJSON, { // your GeoJSON variable
      style: { color: "#666", weight: 1, fillOpacity: 0.1 }
    }).addTo(map);

    // Pre-calculated state centroids
    const stateCentroids = {
      "Alabama": [32.806671, -86.791130],
      "Alaska": [61.370716, -152.404419],
      "Arizona": [33.729759, -111.431221],
      "Arkansas": [34.969704, -92.373123],
      "California": [36.116203, -119.681564],
      "Colorado": [39.059811, -105.311104],
      "Connecticut": [41.597782, -72.755371],
      "Delaware": [39.318523, -75.507141],
      "Florida": [27.766279, -81.686783],
      "Georgia": [33.040619, -83.643074],
      "Hawaii": [21.094318, -157.498337],
      "Idaho": [44.240459, -114.478828],
      "Illinois": [40.349457, -88.986137],
      "Indiana": [39.849426, -86.258278],
      "Iowa": [42.011539, -93.210526],
      "Kansas": [38.526600, -96.726486],
      "Kentucky": [37.668140, -84.670067],
      "Louisiana": [31.169546, -91.867805],
      "Maine": [44.693947, -69.381927],
      "Maryland": [39.063946, -76.802101],
      "Massachusetts": [42.230171, -71.530106],
      "Michigan": [43.326618, -84.536095],
      "Minnesota": [45.694454, -93.900192],
      "Mississippi": [32.741646, -89.678696],
      "Missouri": [38.456085, -92.288368],
      "Montana": [46.921925, -110.454353],
      "Nebraska": [41.125370, -98.268082],
      "Nevada": [38.313515, -117.055374],
      "New Hampshire": [43.452492, -71.563896],
      "New Jersey": [40.298904, -74.521011],
      "New Mexico": [34.840515, -106.248482],
      "New York": [42.165726, -74.948051],
      "North Carolina": [35.630066, -79.806419],
      "North Dakota": [47.528912, -99.784012],
      "Ohio": [40.388783, -82.764915],
      "Oklahoma": [35.565342, -96.928917],
      "Oregon": [44.572021, -122.070938],
      "Pennsylvania": [40.590752, -77.209755],
      "Rhode Island": [41.680893, -71.511780],
      "South Carolina": [33.856892, -80.945007],
      "South Dakota": [44.299782, -99.438828],
      "Tennessee": [35.747845, -86.692345],
      "Texas": [31.054487, -97.563461],
      "Utah": [40.150032, -111.862434],
      "Vermont": [44.045876, -72.710686],
      "Virginia": [37.769337, -78.169968],
      "Washington": [47.400902, -121.490494],
      "West Virginia": [38.491226, -80.954456],
      "Wisconsin": [44.268543, -89.616508],
      "Wyoming": [42.755966, -107.302490]
    };

    // Add state labels
    geojsonLayer.eachLayer(layer => {
      const stateName = layer.feature.properties.name;
      const centroid = stateCentroids[stateName];
      if (!centroid) return;
      L.marker(centroid, { icon: L.divIcon({
        className: 'state-label',
        html: stateName,
        iconSize: [100, 20],
        iconAnchor: [50, 10]
      })}).addTo(map);
    });

    // Club markers example
    const clubs = [
      { name: "Club A", lat: 40.7128, lng: -74.0060 },
      { name: "Club B", lat: 34.0522, lng: -118.2437 },
      // Add all your clubs here
    ];

    clubs.forEach(club => {
      L.marker([club.lat, club.lng], {
        icon: L.icon({
          iconUrl: 'club-marker.png', // optional custom icon
          iconSize: [25, 41],
          iconAnchor: [12, 41],
        })
      }).addTo(map)
      .bindTooltip(club.name, {
        permanent: true,
        direction: 'top',
        offset: [0, -10],
        className: 'club-label'
      });
    });

    // Optional: add your search, radius, geolocation features here
  </script>
</body>
</html>
