// Add markers for each location group with proper pane and clickability
    Object.values(locationGroups).forEach(venueGroup => {
        const firstVenue = venueGroup[0];
        let popupContent = '';
        
        if (venueGroup.length === 1) {
            const venue = venueGroup[0];
            const location = (venue.city && venue.state) ? `${venue.city}, ${venue.state}` : (venue.state || '');
            popupContent = `
                <div class="state-popup-title">Search Result</div>
                <div class="club-list-container">
                    <ul class="club-list">
                        <li class="club-item">
                            <div class="club-name">
                                <a class="club-link" href="${venue.url||'#'}" target="_blank" rel="noopener">${venue.name}</a>
                                <span class="club-type ${venue.type}">${venue.type}</span>
                            </div>
                            ${location ? `<div class="club-location">${location}</div>` : ''}
                            <div class="club-location">Distance: ${venue.distance.toFixed(1)} miles</div>
                        </li>
                    </ul>
                </div>
            `;
        } else {
            popupContent = `
                <div class="state-popup-title">Search Results (${venueGroup.length} venues)</div>
                <div class="club-list-container">
                    <ul class="club-list">
            `;
            venueGroup.forEach(venue => {
                const location = (venue.city && venue.state) ? `${venue.city}, ${venue.state}` : (venue.state || '');
                popupContent += `
                    <li class="club-item">
                        <div class="club-name">
                            <a class="club-link" href="${venue.url||'#'}" target="_blank" rel="noopener">${venue.name}</a>
                            <span class="club-type ${venue.type}">${venue.type}</span>
                        </div>
                        ${location ? `<div class="club-location">${location}</div>` : ''}
                    </li>
                `;
            });
            popupContent += `
                    </ul>
                    <div style="text-align: center; margin-top: 10px; font-style: italic; color: #7f8c8d;">
                        Distance: ${firstVenue.distance.toFixed(1)} miles
                    </div>
                </div>
            `;
        }

        // Create marker with proper z-index and interactivity
        const marker = L.marker([firstVenue.lat, firstVenue.lng], {
            pane: 'searchMarkersPane',
            interactive: true, // Make venue markers clickable
            zIndexOffset: 1000 // Ensure markers appear above other elements
        })
            .bindPopup(popupContent, { maxWidth: 320, maxHeight: 400 })
            .addTo(map);
        searchMarkers.push(marker);
    });
